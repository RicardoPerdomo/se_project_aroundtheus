!function(){"use strict";class e{constructor(e,t,s){this._data={name:e.name,link:e.link},this._handleImageClick=s,this._cardSelector=t}_setEventListeners(){this._likeIcon.addEventListener("click",this._handleLikeIcon),this._deleteBtn.addEventListener("click",this._handleDeleteCard),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this._data)}))}_handleLikeIcon=()=>{this._likeIcon.classList.toggle("card__react-button_active")};_handleDeleteCard=()=>{this._cardElement.remove(),this._cardElement=null};getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardTitleEl.textContent=this._data.name,this._cardImageEl.src=this._data.link,this._cardImageEl.alt="Photo of "+this._data.name,this._likeIcon=this._cardElement.querySelector(".card__react-button"),this._deleteBtn=this._cardElement.querySelector(".card__delete-button"),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_enableButton(){this._submitBtn.classList.remove(this._inactiveButtonClass),this._submitBtn.disabled=!1}disableButton(){this._submitBtn.classList.add(this._inactiveButtonClass),this._submitBtn.disabled=!0}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableButton():this._enableButton()}resetValidation(){this._inputEls.forEach((e=>{this._hideInputError(e)})),this._enableButton()}setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitBtn=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault(e)})),this.setEventListeners()}}class s{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this),this._closeButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target===this._popupElement&&this.close()}))}}class n extends s{constructor(e,t){super(e),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._inputList=this._popupForm.querySelectorAll(".modal__form-input")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}reset(){this._popupForm.reset()}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const i={formSelector:".modal__form",inputSelector:".modal__form-input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__save-button-disabled",inputErrorClass:"modal__form_input_type_error",errorClass:"modal__form-input-error-visible"},r=document.querySelector("#profile-edit-btn"),o=document.querySelector("#profile-title-input"),a=document.forms["profile-form"],l=document.querySelector("#profile-description-input"),c=document.querySelector("#places-add-btn"),u=document.forms["add-place-form"];function d(e){E.open(e)}function _(t){return new e(t,"#card-template",d).getView()}r.addEventListener("click",(()=>{const e=v.getUserInfo();o.value=e.name,l.value=e.job,f.open()})),c.addEventListener("click",(()=>{b.open()}));const m=new t(i,a),h=new t(i,u),p=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{const t=this._renderer(e);this.addItem(t)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:_},".cards__list"),E=new class extends s{constructor(e){super(e),this._previewImage=this._popupElement.querySelector(".modal__image-preview"),this._previewTitle=this._popupElement.querySelector(".modal__image-caption")}open(e){this._previewImage.src=e.link,this._previewImage.alt=e.name,this._previewTitle.textContent=e.name,super.open()}}("#places-preview-modal"),v=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._profileName=document.querySelector(t),this._profileJob=document.querySelector(s)}getUserInfo(){return{name:this._profileName.textContent,job:this._profileJob.textContent}}setUserInfo(e){let{title:t,description:s}=e;this._profileName.textContent=t,this._profileJob.textContent=s}}({nameSelector:".profile__title",jobSelector:".profile__description"}),f=new n("#profile-edit-modal",(function(e){v.setUserInfo(e),f.close()})),b=new n("#places-add-modal",(function(e){const{title:t,url:s}=e,n=_({name:t,link:s});p.addItem(n),b.close(),b.reset(),h.disableButton()}));f.setEventListeners(),E.setEventListeners(),b.setEventListeners(),p.renderItems(),m.enableValidation(),h.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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b0JBQ2xCNkMsRUFBYzdDLG9CQUNkZ0QsRUFBUVEsY0FDUlYsRUFBc0I1QyxtQkFDdEI2QyxFQUFtQjdDLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX2RhdGEgPSB7XHJcbiAgICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgICAgbGluazogZGF0YS5saW5rLFxyXG4gICAgfTtcclxuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fbGlrZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VJY29uKTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQpO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fZGF0YSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbiA9ICgpID0+IHtcclxuICAgIHRoaXMuX2xpa2VJY29uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19yZWFjdC1idXR0b25fYWN0aXZlXCIpO1xyXG4gIH07XHJcblxyXG4gIF9oYW5kbGVEZWxldGVDYXJkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfTtcclxuXHJcbiAgZ2V0VmlldygpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuc3JjID0gdGhpcy5fZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gXCJQaG90byBvZiBcIiArIHRoaXMuX2RhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpa2VJY29uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19yZWFjdC1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdG4gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsKSB7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbDtcclxuICB9XHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsLmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgfVxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkge1xyXG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWwpID0+IGlucHV0RWwudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBkaXNhYmxlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnRuLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4uZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dEVscykpIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV07XHJcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KGUpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlblwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcclxuICAgIGlmIChlLmtleSA9PT0gXCJFc2NhcGVcIikge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcclxuICAgICAgaWYgKGUudGFyZ2V0ID09PSB0aGlzLl9wb3B1cEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm0taW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHJlc2V0KCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2Zvcm0taW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3NhdmUtYnV0dG9uXCIsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc2F2ZS1idXR0b24tZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm1faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Zvcm0taW5wdXQtZXJyb3ItdmlzaWJsZVwiLFxyXG59O1xyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbmNvbnN0IHByb2ZpbGVFZGl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnRuXCIpO1xyXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWZvcm1cIl07XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuXHJcbmNvbnN0IHBsYWNlc0FkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGxhY2VzLWFkZC1idG5cIik7XHJcbmNvbnN0IHBsYWNlQWRkRm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLXBsYWNlLWZvcm1cIl07XHJcblxyXG5wcm9maWxlRWRpdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHVzZXJJbmZvRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VySW5mb0RhdGEubmFtZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHVzZXJJbmZvRGF0YS5qb2I7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5vcGVuKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUVkaXRTdWJtaXQoZm9ybURhdGEpIHtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyhmb3JtRGF0YSk7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xyXG59XHJcblxyXG5wbGFjZXNBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRQbGFjZU1vZGFsLm9wZW4oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVOZXdQbGFjZVN1Ym1pdChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IHsgdGl0bGUsIHVybCB9ID0gY2FyZERhdGE7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudCh7IG5hbWU6IHRpdGxlLCBsaW5rOiB1cmwgfSk7XHJcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICBhZGRQbGFjZU1vZGFsLmNsb3NlKCk7XHJcbiAgYWRkUGxhY2VNb2RhbC5yZXNldCgpO1xyXG4gIGFkZFBsYWNlVmFsaWRhdGlvbi5kaXNhYmxlQnV0dG9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soaW1hZ2VEYXRhKSB7XHJcbiAgaW1hZ2VQcmV2aWV3TW9kYWwub3BlbihpbWFnZURhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0VmlldygpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIHByb2ZpbGVFZGl0Rm9ybSk7XHJcbmNvbnN0IGFkZFBsYWNlVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwbGFjZUFkZEZvcm0pO1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IGdldENhcmRFbGVtZW50IH0sXHJcbiAgXCIuY2FyZHNfX2xpc3RcIlxyXG4pO1xyXG5cclxuY29uc3QgaW1hZ2VQcmV2aWV3TW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcGxhY2VzLXByZXZpZXctbW9kYWxcIik7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX190aXRsZVwiLFxyXG4gIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxyXG4pO1xyXG5cclxuY29uc3QgYWRkUGxhY2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3BsYWNlcy1hZGQtbW9kYWxcIixcclxuICBoYW5kbGVOZXdQbGFjZVN1Ym1pdFxyXG4pO1xyXG5cclxuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5pbWFnZVByZXZpZXdNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5hZGRQbGFjZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxucHJvZmlsZUVkaXRWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkUGxhY2VWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7IC8vZGF0YVxyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy9mdW5jdGlvblxyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB0aGlzLmFkZEl0ZW0oZWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX2ltYWdlLXByZXZpZXdcIlxyXG4gICAgKTtcclxuICAgIHRoaXMuX3ByZXZpZXdUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtY2FwdGlvblwiXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgb3BlbihpbWFnZURhdGEpIHtcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5zcmMgPSBpbWFnZURhdGEubGluaztcclxuICAgIHRoaXMuX3ByZXZpZXdJbWFnZS5hbHQgPSBpbWFnZURhdGEubmFtZTtcclxuICAgIHRoaXMuX3ByZXZpZXdUaXRsZS50ZXh0Q29udGVudCA9IGltYWdlRGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9wcm9maWxlTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX3Byb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICB0aGlzLl9wcm9maWxlSm9iLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsInRoaXMiLCJfZGF0YSIsIm5hbWUiLCJsaW5rIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VJY29uIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlSWNvbiIsIl9kZWxldGVCdG4iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl9jYXJkSW1hZ2VFbCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsImdldFZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZUVsIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJldmVyeSIsIl9lbmFibGVCdXR0b24iLCJfc3VibWl0QnRuIiwiZGlzYWJsZWQiLCJkaXNhYmxlQnV0dG9uIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lucHV0RWxzIiwicmVzZXRWYWxpZGF0aW9uIiwiZm9yRWFjaCIsInNldEV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9jbG9zZUJ1dHRvbiIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJ0YXJnZXQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInJlc2V0IiwiZXZ0IiwiZm9ybVNlbGVjdG9yIiwicHJvZmlsZUVkaXRCdG4iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVFZGl0Rm9ybSIsImZvcm1zIiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwbGFjZXNBZGRCdG4iLCJwbGFjZUFkZEZvcm0iLCJpbWFnZURhdGEiLCJpbWFnZVByZXZpZXdNb2RhbCIsImdldENhcmRFbGVtZW50IiwiY2FyZERhdGEiLCJ1c2VySW5mb0RhdGEiLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwiam9iIiwiZWRpdFByb2ZpbGVNb2RhbCIsImFkZFBsYWNlTW9kYWwiLCJwcm9maWxlRWRpdFZhbGlkYXRpb24iLCJhZGRQbGFjZVZhbGlkYXRpb24iLCJzZWN0aW9uIiwiX3JlZiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwiYWRkSXRlbSIsInByZXBlbmQiLCJfcHJldmlld0ltYWdlIiwiX3ByZXZpZXdUaXRsZSIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX3Byb2ZpbGVOYW1lIiwiX3Byb2ZpbGVKb2IiLCJzZXRVc2VySW5mbyIsIl9yZWYyIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImZvcm1EYXRhIiwidXJsIiwiY2FyZEVsZW1lbnQiXSwic291cmNlUm9vdCI6IiJ9